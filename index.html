<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Di√°logo ‚ô•Ô∏è vs üß†</title>
    <style>
        body {
            background-color: black;
            color: white;
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            overflow: hidden;
        }
        #chat-container {
            width: 80%;
            max-width: 500px;
            height: 70vh;
            overflow-y: auto;
            border: 2px solid white;
            padding: 20px;
            border-radius: 10px;
            background-color: rgba(255, 255, 255, 0.1);
            display: none;
            position: relative;
        }
        .message {
            margin: 10px 0;
            padding: 10px;
            border-radius: 8px;
            opacity: 0;
            white-space: pre-wrap;
        }
        .heart { color: red; text-align: left; }
        .brain { color: lightblue; text-align: right; }
        .typing-indicator {
            font-style: italic;
            opacity: 0.7;
            text-align: center;
            display: none;
            position: absolute;
            bottom: 10px;
            width: 100%;
        }
        #play {
            margin: 10px;
            padding: 10px 20px;
            font-size: 16px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            background-color: red;
            color: white;
        }
    </style>
</head>
<body>

    <button id="play">Reproducir</button>

    <div id="chat-container">
        <div id="messages"></div>
        <div id="typing" class="typing-indicator">Escribiendo...</div>
    </div>

    <script>
        const messages = [
            { text: "Oye, üß†‚Ä¶ ¬øy si le mandamos un mensaje? Solo para saber c√≥mo est√°.", icon: "‚ù§Ô∏è", class: "heart" },
            { text: "No.", icon: "üß†", class: "brain" },
            { text: "Pero la extra√±o‚Ä¶", icon: "‚ù§Ô∏è", class: "heart" },
            { text: "Y yo tambi√©n. Pero ella necesita su espacio.", icon: "üß†", class: "brain" },
            { text: "¬øY si cree que ya no nos importa?", icon: "‚ù§Ô∏è", class: "heart" },
            { text: "Sabe que nos import√≥. Pero insistir ahora solo la har√≠a sentir presionada.", icon: "üß†", class: "brain" },
            { text: "No quiero que piense que la olvidamos‚Ä¶", icon: "‚ù§Ô∏è", class: "heart" },
            { text: "No la olvidamos, solo respetamos su proceso. No est√° lista, y lo mejor que podemos hacer es esperar sin interferir.", icon: "üß†", class: "brain" },
            { text: "Duele callar‚Ä¶", icon: "‚ù§Ô∏è", class: "heart" },
            { text: "Lo s√©. Pero m√°s doler√≠a hacerle sentir que tiene que responder cuando a√∫n no est√° preparada.", icon: "üß†", class: "brain" },
            { text: "Entonces, ¬ønos quedamos en silencio?", icon: "‚ù§Ô∏è", class: "heart" },
            { text: "S√≠, porque a veces, la mejor forma de demostrar amor es sabiendo cu√°ndo dar espacio.", icon: "üß†", class: "brain" },
            { text: "Pero‚Ä¶..¬øEs lo mejor para nosotros?", icon: "‚ù§Ô∏è", class: "heart" },
            { text: "¬°No!, pero es lo mejor para ella y nosotros prometimos cuidarla y es la √∫nica forma.", icon: "üß†", class: "brain" },
            { text: "Recuerda lo que una personita especial nos dijo una vez: 'El soltar tambi√©n es amar.'", icon: "üß†", class: "brain" }
        ];

        let chatContainer = document.getElementById("chat-container");
        let messagesDiv = document.getElementById("messages");
        let typingIndicator = document.getElementById("typing");
        let playButton = document.getElementById("play");

        function showMessages() {
            messagesDiv.innerHTML = "";
            chatContainer.style.display = "block";
            playButton.style.display = "none";

            let index = 0;

            function typeMessage() {
                if (index >= messages.length) return;

                let msg = messages[index];
                typingIndicator.style.display = "block";

                setTimeout(() => {
                    typingIndicator.style.display = "none";

                    let msgDiv = document.createElement("div");
                    msgDiv.className = `message ${msg.class}`;
                    messagesDiv.appendChild(msgDiv);

                    let fullText = `${msg.icon} ${msg.text}`;
                    let i = 0;

                    function typingEffect() {
                        if (i < fullText.length) {
                            msgDiv.innerHTML = fullText.substring(0, i + 1);
                            i++;
                            setTimeout(typingEffect, 50);
                        } else {
                            msgDiv.style.opacity = 1;
                            chatContainer.scrollTop = chatContainer.scrollHeight; // Desplaza hacia abajo
                            speakMessage(msg.icon + " " + msg.text, () => {
                                index++; // Avanzamos al siguiente mensaje
                                typeMessage();
                            });
                        }
                    }
                    typingEffect();
                }, 1000); // Simula el tiempo de "escribiendo..."
            }

            function speakMessage(text, callback) {
                let msg = new SpeechSynthesisUtterance(text);
                msg.lang = "es-ES";
                msg.onend = callback; // Espera a que termine de hablar antes de seguir
                window.speechSynthesis.speak(msg);
            }

            typeMessage();
        }

        playButton.addEventListener("click", showMessages);
    </script>

</body>
</html>